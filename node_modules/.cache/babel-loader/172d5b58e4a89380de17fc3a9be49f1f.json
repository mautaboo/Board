{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\mauri\\\\OneDrive\\\\Documentos\\\\TT\\\\Desarrollo\\\\eboard\\\\src\\\\Components\\\\Pizarron\\\\Board.js\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport { Caanvas, Sketch } from './PizarronElements';\nimport io from \"socket.io-client\";\nimport { useState } from 'react';\nimport { useEffect } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Boardi = _ref => {\n  _s();\n  let {\n    color\n  } = _ref;\n  console.log(color);\n  const [socket, setSocket] = useState();\n  const [imageData, setImageData] = useState(null);\n  let timeout;\n  useEffect(() => {\n    const s = io(\"http://localhost:5000\");\n    setSocket(s);\n    return () => {\n      s.disconnect();\n    };\n  }, []);\n  useEffect(() => {\n    drawOnCanvas();\n    if (imageData) {\n      let image = new Image();\n      let canvas = document.querySelector(\"#board\");\n      let ctx = canvas.getContext(\"2d\");\n      image.onload = () => {\n        ctx.drawImage(image, 0, 0);\n      };\n      image.src = imageData;\n    }\n  }, [color]);\n  const drawOnCanvas = () => {\n    let canvas = document.querySelector(\"#board\");\n    let ctx = canvas.getContext(\"2d\");\n    let sketch = document.querySelector(\"#sketch\");\n    let sketch_style = getComputedStyle(sketch);\n    canvas.width = parseInt(sketch_style.getPropertyValue(\"width\"));\n    let mouse = {\n      x: 0,\n      y: 0\n    };\n    let last_mouse = {\n      x: 0,\n      y: 0\n    };\n    canvas.addEventListener(\"mousemove\", function (e) {\n      last_mouse.x = mouse.x;\n      last_mouse.y = mouse.y;\n      mouse.x = e.pageX - this.offsetLeft;\n      mouse.y = e.pageY - this.offsetTop;\n    }, false);\n    ctx.linewidth = 5;\n    ctx.lineJoin = \"round\";\n    ctx.lineCap = \"round\";\n    ctx.strokeStyle = color;\n    canvas.addEventListener(\"mousedown\", e => {\n      canvas.addEventListener(\"mousemove\", onPaint, false);\n    }, false);\n    canvas.addEventListener(\"mouseup\", e => {\n      canvas.removeEventListener(\"mousemove\", onPaint, false);\n    }, false);\n    const onPaint = () => {\n      ctx.beginPath();\n      ctx.moveTo(last_mouse.x, last_mouse.y);\n      ctx.lineTo(mouse.x, mouse.y);\n      ctx.closePath();\n      ctx.stroke();\n      if (timeout !== undefined) {\n        clearTimeout(timeout);\n      }\n      timeout = setTimeout(() => {\n        let base64ImageData = canvas.toDataURL(\"image/png\");\n        setImageData(base64ImageData);\n      }, 1000);\n    };\n  };\n  return /*#__PURE__*/_jsxDEV(Sketch, {\n    children: /*#__PURE__*/_jsxDEV(Caanvas, {\n      id: \"board\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 85,\n    columnNumber: 7\n  }, this);\n};\n_s(Boardi, \"BWSdwN5AIawVcGdPDtTUUHTYpyw=\");\n_c = Boardi;\nexport default Boardi;\nvar _c;\n$RefreshReg$(_c, \"Boardi\");","map":{"version":3,"names":["React","Caanvas","Sketch","io","useState","useEffect","Boardi","color","console","log","socket","setSocket","imageData","setImageData","timeout","s","disconnect","drawOnCanvas","image","Image","canvas","document","querySelector","ctx","getContext","onload","drawImage","src","sketch","sketch_style","getComputedStyle","width","parseInt","getPropertyValue","mouse","x","y","last_mouse","addEventListener","e","pageX","offsetLeft","pageY","offsetTop","linewidth","lineJoin","lineCap","strokeStyle","onPaint","removeEventListener","beginPath","moveTo","lineTo","closePath","stroke","undefined","clearTimeout","setTimeout","base64ImageData","toDataURL"],"sources":["C:/Users/mauri/OneDrive/Documentos/TT/Desarrollo/eboard/src/Components/Pizarron/Board.js"],"sourcesContent":["import React from 'react'\r\nimport { Caanvas, Sketch } from './PizarronElements'\r\nimport io from \"socket.io-client\"\r\nimport { useState } from 'react';\r\nimport { useEffect } from 'react';\r\n\r\n\r\nconst Boardi = ({color}) => {\r\n  console.log(color);\r\n   const[socket, setSocket] = useState();\r\n   const[imageData, setImageData] = useState(null)\r\n   let timeout;\r\n\r\n   useEffect(()=>{\r\n      const s = io(\"http://localhost:5000\");\r\n      setSocket(s)\r\n\r\n      return ()=>{\r\n        s.disconnect();\r\n      }\r\n   },[]);\r\n\r\n   useEffect(()=>{\r\n    drawOnCanvas();\r\n    if(imageData){\r\n      let image = new Image();\r\n      let canvas = document.querySelector(\"#board\");\r\n      let ctx = canvas.getContext(\"2d\");\r\n      image.onload=()=>{\r\n        ctx.drawImage(image,0,0);\r\n      }\r\n      image.src=imageData;\r\n    }\r\n   },[color])\r\n \r\n   const drawOnCanvas = () =>{\r\n    let canvas = document.querySelector(\"#board\");\r\n    let ctx = canvas.getContext(\"2d\");\r\n\r\n    let sketch = document.querySelector(\"#sketch\");\r\n    let sketch_style = getComputedStyle(sketch);\r\n    canvas.width = parseInt(sketch_style.getPropertyValue(\"width\"));\r\n\r\n    let mouse = {x:0,y:0};\r\n    let last_mouse = {x:0,y:0};\r\n\r\n    canvas.addEventListener(\"mousemove\",function(e){\r\n      last_mouse.x = mouse.x;\r\n      last_mouse.y = mouse.y;\r\n\r\n      mouse.x = e.pageX - this.offsetLeft;\r\n      mouse.y = e.pageY - this.offsetTop;\r\n    },false)\r\n    \r\n    ctx.linewidth=5;\r\n    ctx.lineJoin = \"round\";\r\n    ctx.lineCap = \"round\";\r\n    ctx.strokeStyle=color;\r\n    \r\n    canvas.addEventListener(\"mousedown\",(e)=>{\r\n      canvas.addEventListener(\"mousemove\",onPaint,false)\r\n     },false)\r\n\r\n     canvas.addEventListener(\"mouseup\",(e)=>{\r\n      canvas.removeEventListener(\"mousemove\",onPaint,false);\r\n     },false)\r\n\r\n    const onPaint = ()=>{\r\n      ctx.beginPath();\r\n      ctx.moveTo(last_mouse.x,last_mouse.y);\r\n      ctx.lineTo(mouse.x,mouse.y);\r\n      ctx.closePath();\r\n      ctx.stroke();\r\n      if(timeout!==undefined){\r\n        clearTimeout(timeout)\r\n      }\r\n      timeout = setTimeout(()=>{\r\n        let base64ImageData = canvas.toDataURL(\"image/png\");\r\n        setImageData(base64ImageData);\r\n      },1000)\r\n    }\r\n  }\r\n\r\n    return (\r\n      <Sketch>\r\n        <Caanvas id=\"board\"/>\r\n      </Sketch>\r\n\r\n  );\r\n};\r\n\r\nexport default Boardi;"],"mappings":"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"},"metadata":{},"sourceType":"module"}